<div class="container">
    <div class="row"> <h2><img src="/../../assets/img/Historial.png" alt=""></h2></div>
    <div class="table-responsive-sm">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Compra</th>
          <th>Fecha</th>
          <th>Cantidad</th>
          <th>Costo</th>
          <th>Ingredientes Extras</th>
          <th>Estado</th>
          <th>Opciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor= 'let compra of compras'>
          <td> <strong> <img src="{{compra.urlImg}}"> {{compra.nombre}} </strong></td>
          <td>{{compra.fecha | date: 'dd/MM/yyyy'}}</td>
          <td> {{compra.cantidad}}</td>
          <td> {{compra.precioTotal}}</td>
          <td> <span *ngIf="compra.ing1!='Ninguno' && compra.ing2!='Ninguno'">{{compra.ing1}} y {{compra.ing2}}</span>
            <span *ngIf="compra.ing1!='Ninguno' && compra.ing2=='Ninguno'">{{compra.ing1}}</span>
            <span *ngIf="compra.ing1=='Ninguno' && compra.ing2!='Ninguno'">{{compra.ing2}}</span>
            <span *ngIf="compra.ing1=='Ninguno' && compra.ing2=='Ninguno'">Ninguno</span></td>
          <td> <span *ngIf="!compra.isEntregado">Sin entregar</span>
            <span *ngIf="compra.isEntregado">Entregado</span></td>
          <td><button type="button" class="btn btn-block btn-secondary" data-toggle="collapse" [attr.data-target]="'#'+compra.id" aria-expanded="false" aria-controls="collapseExample6" ><i class="fas fa-shopping-cart"></i> Agrega al Carrito</button>
             <div class="container collapse" id="{{compra.id}}">
            <form (ngSubmit)="agregaCarrito(compra)">
      <div class="row">
              <div class="form-group col-sm">

                <label for="sel1 {{compra.id}}">Ing 1</label>
                <select [(ngModel)]="compra.ing1" name="ing1" class="custom-select" id="sel1 {{compra.id}}">
              <option>Ninguno</option>
              <option *ngFor="let option of compra.option">{{option}}</option>
                </select>
             </div>
             <div class="form-group col-sm">
                <label for="sel2 {{compra.id}}">Ing 2</label>
                <select [(ngModel)]="compra.ing2" name="ing2" class="custom-select" id="sel2 {{compra.id}}">
              <option>Ninguno</option>
              <option *ngFor="let option of compra.option">{{option}}</option>
                </select>
              </div>
              <div class="col-sm">
                   <label for="Confirm{{compra.id}}">Confirme la operacion</label>
                  <button class="btn btn-primary" type="submit" id="Confirm{{compra.id}}"> Confirmar </button>
             </div>
                </div>

              </form>
            </div>
          </td>

        </tr>
      </tbody>
      <tfoot>
          <tr>
            <td colspan=7>
                <button type="button" class="btn" routerLink='/orden'>Checkout</button>
      </td> </tr> </tfoot>
    </table>
  </div>
  </div>

