
  <div class="container">


    <div class="row">
    <div class="col-lg-3">

        <h2 class="my-4" (click)="getProduct()"><img class="baila" src="/../../assets/img/logo.png" alt=""> </h2>
        <div class="container">
        <div class="row">
          <div class="search-form">
            <label for="search"> Barra de Busquedad </label>
          <div class="container">
            <input [(ngModel)]="Busquedad" id ="search" (keydown)="search($event)" type="text" placeholder="Busca por nombre">
            <div class="search"></div>
          </div>
        </div>
    </div>
    </div>
     <h4>Categorias</h4>
    <div class="list-group">
        <span (click)="getProductoFilterCategory('Bebida')" class="list-group-item"><i class="fas fa-beer"></i>Bebida</span>
        <span (click)="getProductoFilterCategory('Almuerzo')" class="list-group-item"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48Zz48cGF0aCBkPSJNMjc2LDIyMi40Yy0yNS44LTEwLjgtNTUuMi0xNy04Ni41LTE3Qzg5LDIwNS40LDcuMywyNjguOSw2LDM0Ny42aDI4Mi44TDI3NiwyMjIuNHogTTQ1LjQsMzA3LjVsLTEuNS0xLjZsNS42LTQuOWwxLjUsMS42ICAgTDQ1LjQsMzA3LjV6IE0xMjAsMjY4LjlsLTEuNS0xLjZsNS42LTQuOWwxLjUsMS42TDEyMCwyNjguOXogTTE0NC43LDMyOS45bC0xLjUtMS42bDUuNi00LjlsMS41LDEuNkwxNDQuNywzMjkuOXogTTE1MS43LDI5Mi4xICAgbC0xLjUtMS42bDUuNi00LjlsMS41LDEuNkwxNTEuNywyOTIuMXogTTE3MC4yLDI0MC45bC0xLjUtMS42bDUuNi00LjlsMS41LDEuNkwxNzAuMiwyNDAuOXogTTIxNy40LDI3OC4ybDUuNi00LjlsMS41LDEuNiAgIGwtNS42LDQuOUwyMTcuNCwyNzguMnogTTIyMi40LDMyNi42bC0xLjUtMS42bDUuNi00LjlsMS41LDEuNkwyMjIuNCwzMjYuNnogTTI0Mi4zLDI0OS4xbC0xLjUtMS42bDUuNi00LjlsMS41LDEuNkwyNDIuMywyNDkuMXogICAgTTI3MC43LDI4MS41bDUuNi00LjlsMS41LDEuNmwtNS42LDQuOUwyNzAuNywyODEuNXoiLz48cGF0aCBkPSJNMjk2LjksNDI3LjJjLTIuNSwxLjUtNS4zLDIuOC04LjQsNGMtMTIuMSw0LjYtMjcuMSw2LjEtMzkuOCwyLjVjLTI3LjUtNy44LTM1LjktMzUuNy02OS42LTM1LjEgICBjLTEyLjEsMC4yLTIzLjQsNC4zLTMzLjIsOS4xYy0xMS45LDUuOS0yMi44LDEyLjYtMzUuMiwxOC4xYy0xNi40LDcuMi0zNy45LDExLjgtNTUuNSw1LjljLTE3LjMtNS44LTI1LjEtMjIuOC0zMC40LTM1LjRINnYyMy40ICAgYzAsMzAuNiwxNS40LDU1LjUsMzQuMyw1NS41SDMwNWMtMi40LTMuNS00LTcuNi00LjQtMTIuMUwyOTYuOSw0MjcuMnoiLz48cGF0aCBkPSJNMTMuNCwzNjAuNWMwLDIuNCwxLjksNC4zLDQuMyw0LjNoMjcyLjlsLTAuOS04LjZoLTI3MkMxNS4zLDM1Ni4yLDEzLjQsMzU4LjEsMTMuNCwzNjAuNXoiLz48cGF0aCBkPSJNMTMuNywzODcuN2gyNzkuMmwtMS42LTE1LjRIMTMuN2MtNC4yLDAtNy43LDMuNC03LjcsNy43QzYsMzg0LjMsOS40LDM4Ny43LDEzLjcsMzg3Ljd6Ii8+PHBhdGggZD0iTTQ1Nyw0NC4zaDQ5di03LjRoLTQ5Yy0xMiwwLTIyLjQsNy43LTI1LjksMTkuMmwtMTcuNSw1Ny40SDI5Mi40Yy04LjcsMC0xNS41LDcuNS0xNC42LDE2LjJsMzQsMzMyLjMgICBjMC44LDcuNSw3LjEsMTMuMiwxNC42LDEzLjJoNDUuN2gxLjFoNDUuN2M3LjUsMCwxMy45LTUuNywxNC42LTEzLjJsMzQtMzMyLjNjMC45LTguNy01LjktMTYuMi0xNC42LTE2LjJoLTMxLjRsMTYuOS01NS4yICAgQzQ0MC43LDQ5LjksNDQ4LjMsNDQuMyw0NTcsNDQuM3oiLz48L2c+PC9zdmc+" alt="">Almuerzo</span>
        <span (click)="getProductoFilterCategory('Postre')" class="list-group-item"><i class="fas fa-cookie-bite"></i> Postre</span>
        <span (click)="getProductoFilterCategory('Desayuno')" class="list-group-item"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDY0IDY0IiBoZWlnaHQ9IjY0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2NCA2NCIgd2lkdGg9IjY0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxnPjxwYXRoIGQ9Ik00NC4wMjksMjYuODQ0Yy0xLjkzNy0yLjE0Ni00LjYzOC0zLjYwMS03LjY2OS0zLjkxNmMtNi4yNTYtMS4xNTYtMTAuNDg4LTMuNzUxLTEyLjUxNC01LjI4MiAgICBjLTAuMDI5LDAtMC4wNDUtMC4wMjktMC4wNzYtMC4wNmMtMC41MzktMC40MTktMC45MjktMC43Mi0xLjEyNS0wLjkxNWMtMC4wNTktMC4wOTEtMC4xMzUtMC4xMi0wLjE5NC0wLjE4ICAgIGMtMi4zNDEtMS43NTUtNS4yNTEtMi43NjEtOC4zODctMi43NjFjLTcuNzg5LDAtMTQuMTA1LDYuMzE3LTE0LjEwNSwxNC4xMDRjMCwzLjUyNSwxLjI3NSw2LjczOCwzLjQyLDkuMTk4ICAgIGMwLDAsMC4wOTEsMC4wNzQsMC4yNDEsMC4yN2MwLjA2MiwwLjA2MSwwLjEyLDAuMTM3LDAuMTgsMC4yMjZjMC43MTksMC45NiwyLjE3NiwzLjUxMSwyLjY0Miw4LjczMyAgICBjMC4wMTUsMC4yODQsMC4wNDQsMC41ODUsMC4wNTksMC44ODVjMC43NSw3LjQyOCw2Ljk5MywxMy4yMDQsMTQuNjE2LDEzLjIwNGM0LjY2NywwLDguODI0LTIuMTc2LDExLjUwOC01LjU1MiAgICBjMC4zOS0wLjYsMC43NzktMS4xNTQsMS4xNTUtMS42ODFjMy42MDItNS4xOTEsNS44NjgtNi44NDIsNi42NDctNy4zMDdjMC4yMS0wLjEwNSwwLjMxNS0wLjE1LDAuMzE1LTAuMTUgICAgYzMuODEyLTIuMDI1LDYuNDIzLTYuMDQ4LDYuNDIzLTEwLjY5OEM0Ny4xNjUsMzEuODI2LDQ1Ljk3OSwyOC45OSw0NC4wMjksMjYuODQ0eiBNMTkuNTU5LDQzLjMxICAgIGMtNS4yOTUsMC05LjU4OS00LjI5My05LjU4OS05LjU4OWMwLTUuMjkzLDQuMjkzLTkuNTg5LDkuNTg5LTkuNTg5YzUuMjk2LDAsOS41ODksNC4yOTYsOS41ODksOS41ODkgICAgQzI5LjE0OCwzOS4wMTcsMjQuODU1LDQzLjMxLDE5LjU1OSw0My4zMXoiIGZpbGw9IiMyNDFGMjAiLz48L2c+PHBhdGggZD0iTTQzLjQ4MywzLjY1Yy05LjYwMiwwLTE3LjY0NSw0LjUxNi0xOS45MjcsMTAuNjI0YzAsMCw0Ljg2Miw1LjQxNiwxMy4zNyw2LjQwNyAgIGM3LjM4MiwwLjg3LDE2LjczLDkuMzc4LDExLjUzOSwyMC44NDFsLTAuMDE1LDAuMDE3YzAsMC4wMTUtMC4wMTYsMC4wMjktMC4wMTYsMC4wMjljLTAuMjMsMC4zNTQtMS42MjIsMi40MTgtMy4wNTQsMy44OTIgICBjLTAuMDIxLDAuMDIyLTAuMDI2LDAuMDM4LTAuMDQ3LDAuMDYyYy0xLjEwNSwxLjI0LDAsMS4zNDQsMCwxLjM0NGMwLjc0MSwwLDEsMCwxLDBoOS42MzRjMS45OTUsMCwzLjU4NS0xLjYwNSwzLjU4NS0zLjYwMnYtMTYuNyAgIGMyLjgyMS0yLjQsNC40ODctNS40NDcsNC40ODctOC43OTJDNjQuMDQxLDkuOTY3LDU0Ljg0MywzLjY1LDQzLjQ4MywzLjY1eiIgZmlsbD0iIzI0MUYyMCIvPjxwYXRoIGQ9Ik0xNS4wMDksMjkuNTU5YzAsMCwxLjQxNC0xLjg1MiwzLjgzOC0xLjk3YzEuNTc4LTAuMDIzLDIuNTYzLDAuNDQ2LDIuODY4LDAuODY4czAuODIsMS45MjItMC45ODUsMi40MzggICBjLTAuMzc1LDAuMDQ3LTEuMDMxLTAuMjExLTEuMDMxLTAuMjExcy0xLjMzNi0wLjM3NS0yLjIwNCwwLjYwOWMtMC4zNTIsMC40NDUtMC40OTIsMC43OTctMC41NjIsMS4wMzJzLTAuMzg5LDEuMTk2LTEuNDQ5LDEuMTcyICAgYy0xLjA2LTAuMDIzLTEuNjkzLTEuMDU1LTEuNDExLTIuMDE3QzE0LjM1MywzMC41MiwxNS4wMDksMjkuNTU5LDE1LjAwOSwyOS41NTl6IiBmaWxsPSIjMjQxRjIwIi8+PC9nPjwvc3ZnPg==" alt=""> Desayuno</span>
  </div>

    </div>

    <div class="col-lg-9">
        <div class="row"> <h2><img src="/../../assets/img/Administrador.png" alt=""></h2></div>
<div class="row">
    <table class="table table-hover">
      <thead>
        <tr>
          <th><h3>Producto</h3></th>
          <th><h3>Fecha</h3></th>
          <th><h3>Precio</h3></th>
          <th><h3>Disponible</h3></th>
          <th><h3> Opciones</h3></th>
        </tr>
      </thead>
      <tbody *ngFor="let producto of productos" class="collection" >
        <tr>
          <td> <strong> <img src="{{producto.img}}" alt=""> {{producto.nombre}}</strong> </td>
          <td> <strong>{{producto.fecha | date: 'dd/MM/yyyy'}}</strong> </td>
          <td><strong>{{producto.precio}}</strong></td>
          <td><strong *ngIf="producto.disponibilidad">Disponible</strong>
            <strong *ngIf="!producto.disponibilidad">No disponible</strong></td>
          <td><button type="button" (click)="deleteProducto($event,producto)"class="btn btn-primary"><i class="far fa-times-circle"></i></button>
            <button type="button" *ngIf="editState==false" data-toggle="collapse" [attr.data-target]="'#'+'sel'+producto.id" aria-expanded="false" [attr.aria-controls]="'sel'+producto.id" (click)="editProducto($event,producto)" class="btn btn-secondary"><i class="fas fa-edit"></i></button>
            <button type="button" *ngIf="editState && productoToEdit.id==producto.id" (click)="clearState()" class="btn btn-secondary" data-toggle="collapse" [attr.data-target]="'#'+'sel'+producto.id" aria-expanded="true" [attr.aria-controls]="'sel'+producto.id" ><i class="fas fa-edit"></i></button>
          </td>

          </tr>
          <tr > <td colspan="5">
            <div [attr.id]="'sel'+producto.id" class="collapse container">
                <form (ngSubmit)="onUpdateProducto(producto)" #formOld="ngForm">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                        <label for="nombrex{{producto.id}}">Nombre del producto</label>

                        <input [(ngModel)]="producto.nombre" #nombre="ngModel" name="nombre" type="text" class="form-control" id="nombrex{{producto.id}}" placeholder="Nombre del producto">
                      </div>
                      <div class="form-group col-md-6">

                      <div class="item">
                        Progress: {{ (uploadProgress | async) / 100 | percent }}
                      </div>
                        <section *ngIf="(uploadURL | async) !== null">
                           <p> Enhorabuena la imagen se ha subido correctamente</p>
                        </section>

                      <div class="custom-file">
                        <input class="custom-file-input" type="file" name="img" (change)="upload($event)" accept="image/*" id="img{{producto.id}}">
                        <label class="custom-file-label" name="img" for="img{{producto.id}}">Elige imagen</label>
                      </div>
                      </div>
                        </div>

                      <div class="form-row">
                          <div class="form-group col-md-4">
                              <form (ngSubmit)="agregaIng(formNew1)" #formNew1="ngForm">

                                  <label for="ing1{{producto.id}}">Ingrediente</label>
                                  <input [(ngModel)]="ingrediente" name="ing1" #ing1="ngModel" type="text" class="form-control" id="ing1{{producto.id}}" placeholder="Ingrediente"
                                   minlength="5" maxlength="10" required>

                                <div class='alerta' *ngIf="ing1.touched && !ing1.valid">
                                    <div *ngIf="ing1.errors.required"> El nombre del ingrediente es requerido </div>
                                    <div *ngIf="ing1.errors.minlength"> El nombre debe ser de al menos 5 caracteres </div>
                                  </div>

                                  <button type="submit" style="margin-top:10px"class="btn btn-block">Agrega</button>
                                </form>
                                </div>
                                <div class="form-group col-md-8">
                                    <label>Lista de Ingredientes</label>
                                    <ul> <li *ngFor="let extras of producto.extras">{{extras}}   <div (click)="borraExtra(extras)"><i class="far fa-times-circle"></i></div> </li> </ul>

                                </div>
                               </div>
                      <div class="form-row">
                          <div class="form-group col-md-6">
                          <label for="precios{{producto.id}}">Precio</label>
                          <input [(ngModel)]="producto.precio" name="precio" #precio="ngModel" type="text" class="form-control" id="precios{{producto.id}}">
                        </div>
                        <div class="form-group col-md-6">

                          <label for="categoria{{producto.id}}">Categoria</label>
                          <select [(ngModel)]="producto.categoria" name="categoria" #categoria="ngModel" class="custom-select" id="categoria{{producto.id}}" required >
                            <option>Postre</option>
                            <option>Bebida</option>
                            <option>Desayuno</option>
                            <option>Almuerzo</option>
                          </select>


                        </div>
                        </div>
                        <div class="form-group">
                            <label for="description{{producto.id}}">Descripcion</label>
                            <textarea [(ngModel)]="producto.descripcion" name="descripcion" #descripcion="ngModel" class="form-control" id="description{{producto.id}}" rows="3"></textarea>
                          </div>
                        <div class="custom-control custom-checkbox">
                            <input [(ngModel)]="producto.disponibilidad" name="disponibilidad" #disponibilidad="ngModel" type="checkbox" class="custom-control-input" id="Check1{{producto.id}}">
                            <label class="custom-control-label" for="Check1{{producto.id}}">Disponible</label>
                          </div>
                          <div class="custom-control custom-checkbox">
                            <input [(ngModel)]="producto.isPersonalizable" name="personalizable" #isPersonalizable="ngModel" type="checkbox" class="custom-control-input" id="Check2{{producto.id}}">
                            <label class="custom-control-label" for="Check2{{producto.id}}">Personalizable</label>
                          </div>
                      <button type="submit" class="btn btn-primary" data-toggle="collapse" [attr.data-target]="'#'+producto.id" aria-expanded="true" aria-controls="collapse" >Actualizar</button>

                </form>

              </div>
          </td> </tr>


        </tbody>
        <tfoot>
          <tr>
            <td colspan="5">
          <button type="button" *ngIf="!editState" class="btn" data-toggle="collapse" data-target="#collapseExample1" aria-expanded="false" aria-controls="collapseExample1" >Crear nuevo producto</button>
        </td>
      </tr>
        <tr> <td colspan="5"> <div class="collapse" id="collapseExample1">
            <form (ngSubmit)="onGuardarProducto(formNew)" #formNew="ngForm">
                <div class="form-row">
                    <div class="form-group col-md-6">
                    <label for="name">Nombre del producto</label>
                     <input [(ngModel)]="producto.nombre" #nombre="ngModel" name="nombre" type="text" class="form-control" id="name" placeholder="Nombre del producto" required
                     minlength="4" maxlength="20">
                   <div *ngIf="nombre.touched && !nombre.valid">
                     <div *ngIf="nombre.errors.required"> El nombre del producto es requerido </div>
                     <div *ngIf="nombre.errors.minlength"> El nombre debe ser de al menos 4 caracteres </div>
                   </div>
                    </div>
                  <div class="form-group col-md-6">

                    <div class="item">
                      Progress: {{ (uploadProgress | async) / 100 | percent }}
                    </div>
                      <section *ngIf="(uploadURL | async) !== null">
                         <p> Enhorabuena la imagen se ha subido correctamente</p>
                      </section>

                    <div class="custom-file">
                      <input class="custom-file-input" type="file" name="img" (change)="upload($event)" accept="image/*" id="img">
                      <label class="custom-file-label" name="img" for="img">Elige imagen</label>
                    </div>
                    </div>
                  </div>


                  <div class="form-row">
                      <div class="form-group col-md-4">
                    <form (ngSubmit)="agregaIng(formNew1)" #formNew1="ngForm">

                    <label for="ing1x">Ingrediente</label>
                    <input [(ngModel)]="ingrediente" name="ing1" #ing1="ngModel" type="text" class="form-control" id="ing1x" placeholder="Ingrediente 1"
                     minlength="5" maxlength="10" required>

                  <div class='alerta' *ngIf="ing1.touched && !ing1.valid">
                      <div *ngIf="ing1.errors.required"> El nombre del ingrediente es requerido </div>
                      <div *ngIf="ing1.errors.minlength"> El nombre debe ser de al menos 5 caracteres </div>
                    </div>

                    <button type="submit" style="margin-top:10px"class="btn btn-block">Agrega</button>
                  </form>
                  </div>

                  <div class="form-group col-md-8">
                      <label>Lista de Ingredientes</label>
                      <ul> <li *ngFor="let extras of producto.extras">{{extras}}   <div (click)="borraExtra(extras)"><i class="far fa-times-circle"></i></div> </li> </ul>

                  </div>


                  </div>
                  <div class="form-row">
                      <div class="form-group col-md-6">
                      <label for="precios">Precio</label>
                      <input [(ngModel)]="producto.precio" name="precio" #precio="ngModel" type="text" class="form-control" id="precios" placeholder="Ingrese Precio"
                      minlength="1" maxlength="7" required>
                      <div class='alerta' *ngIf="precio.touched && !precio.valid">
                          <div *ngIf="precio.errors.required"> El precio es requerido </div>
                          <div *ngIf="precio.errors.minlength"> El precio debe ser de 1 caracter minimo </div>
                        </div>
                    </div>
                    <div class="form-group col-md-6">

                      <label for="category">Categoria</label>
                      <select [(ngModel)]="producto.categoria" value="Postre" name="categoria" #categoria="ngModel" class="custom-select" id="category" required>
                        <option>Postre</option>
                        <option>Bebida</option>
                        <option>Desayuno</option>
                        <option>Almuerzo</option>
                      </select>
                    </div>
                    </div>
                    <div class="form-group">
                        <label for="description">Descripcion</label>
                        <textarea [(ngModel)]="producto.descripcion" name="descripcion" #descripcion="ngModel" class="form-control" id="description" rows="3"></textarea>
                      </div>
                    <div class="custom-control custom-checkbox">
                        <input [(ngModel)]="producto.disponibilidad" name="disponibilidad" #disponibilidad="ngModel" type="checkbox" class="custom-control-input" id="Check1">
                        <label class="custom-control-label" for="Check1">Disponible</label>
                      </div>
                      <div class="custom-control custom-checkbox">
                        <input [(ngModel)]="producto.isPersonalizable" name="personalizable" #isPersonalizable="ngModel" type="checkbox" class="custom-control-input" id="Check2">
                        <label class="custom-control-label" for="Check2">Personalizable</label>
                      </div>
                  <button  type="submit" class="btn btn-primary">Guardar</button>

            </form>
          </div>
      </td> </tr> </tfoot>
    </table>

  </div>
  </div>
</div>
  </div>

